
### 期末项目——拍照APP 

#### 一.加值宣言 
经调查，目前已有较多用于拍照的APP，例如美图秀秀、美颜相机、B612等。然而用户的需求在不断地变化，要求也日渐增多，用户对于拍照APP的要求不再仅仅只是美颜或者是拍照时加贴图，用户希望拍照念APP能够拥有更多的人性化便捷化的功能。
+ 因此，我构想的拍照APP的创新功能有：
1. 当用户站在教学楼前拍照留念时，可能会突然想起刚入学时拍下的那张照片，并且想要将那张「过去时光的照片」中的自己与现在的自己进行同框对比，但可能由于各种原因无法实现。因此我设想APP内应该有一个功能，利用人像分割功能，然后可以使用户「过去时光的照片」中的自己出现在应用中的取景器中，与眼前的场景重叠，然后合成出一张「今昔对比」的照片。
2. 可以让用户只需上传自己的一张照片，就能轻轻松松试遍所有衣服饰物
3. 可以根据用户的表情、情绪等人脸属性信息，实现特效相机、动态贴纸等互动娱乐功能
4. 拍照过程中，结合用户的手势（如点赞、比心），实时增加相应的贴纸或特效，丰富交互体验

#### 二.核心价值 （最小可行性产品）

着眼于用户想将现在的自己与过去的自己进行对比的需求

#### 三.背景
目前，对于拍照APP的这一概念，很多人认为就是为用户提供照片美化的功能软件。因此想要从市场中脱颖而出，就要另辟蹊径，满足用户更加多样化的需求。

#### 四.目的 
1. 让用户轻松实现「今昔对比」
2. 让用户不用亲自去到实体店，也可以知道衣服的上身效果甚至在线上就可以开始自己的时装秀
3. 让有选择困难症的用户不用再纠结拍照要选什么贴图，只需要做出一定的手势以及显露出自己的最佳表情，APP就能根据用户的表情或手势选出适合用户的贴图或特效，自动显示在取景器中


#### 五.目标 
+ 前期目标
实现「今昔对比」功能：用户将旧照片导入APP内，APP能够智能地将旧照片中的人像抠下来，并且抠下来的人像能够直接出现在应用中的取景器中，与眼前的场景重叠，然后生成一张对比图。

+ 中期目标
实现线上试衣的功能：用户将自己的全身照导入APP内，APP能够智能地将照片中的人像抠下来，然后用户就能开始线上试衣。

+ 后期目标
     1. 在用户拍照过程中，结合用户的手势（如点赞、比心），实时增加相应的贴纸或特效，丰富交互体验
     2. 在用户拍照时，获取用户的表情、情绪等人脸属性信息，实现特效相机、动态贴纸等互动娱乐功能

#### 六.用户
1. 喜欢拍照的用户
2. 想记录自身变化的用户
3. 有选择困难症的用户
4. 想在网上买衣服的用户

#### 七.用户痛点 
+ 场景一：用户想在同一地点，让过去的自己与现在的自己同框对比。
+ 场景二：用户在网上看到一件很漂亮的衣服，但却不知道是否适合自己，衣服的上身效果如何。
+ 场景三：想在自己的照片里增加贴图，但由于贴图的种类太多，以至于不知道该选哪一个。


#### 八.用户需求:（使用的人工智能要反映到需求列表中） 
|用户案例|对应标题|重要程度|
|:-|:-:|-:|
|用户想实现今昔对比|人像分割|重要|
|用户想知道衣服上身效果如何|人像分割|重要|
|用户想根据表情情绪选择合适的照片贴图或特效|人脸检测|次重要|
|用户想根据手势为图片添加贴图或特效|手势识别|次重要|

#### 九.使用者交互与设计（axure产品原型）

+ 拍照APP首页
![拍照APP首页]()

+ 今昔对比功能
![今昔对比功能1]()
![今昔对比功能2]()

+ 线上试衣功能
![线上试衣功能1]()
![线上试衣功能1]()

+ 根据用户表情自动出现贴纸或特效功能
![根据用户表情自动出现贴纸或特效功能1]()
![根据用户表情自动出现贴纸或特效功能2]()

+ 根据用户手势自动出现贴纸或特效功能
![根据用户手势自动出现贴纸或特效功能1]()
![根据用户手势自动出现贴纸或特效功能2]()




+ 我的
![我的1]()
![我的2]()
![我的3]()


#### 十.产品结构图
+ 产品功能结构图
![产品功能结构图]()

+ 产品信息结构图
![产品信息结构图]()

+ 产品流程图

![产品流程图]()

+ 产品结构图
![产品结构图]()

#### 十一.API 的运用 
1. 百度API——人脸检测
+ API价值主张
①检测图片中的人脸并标记出人脸坐标，支持同时识别多张人脸
②准确识别多种人脸属性信息，包括年龄、性别、种族、颜值、表情、情绪、脸型、头部姿态
③算法世界领先；服务稳定高效；灵活简单易用
④提供人脸检测与属性分析在线接口，快速检测人脸并返回人脸框位置、五官定位与轮廓关键点信息，并准确识别多种人脸属性
④基于150关键点识别，对人脸五官及轮廓自动精准定位，可自定义对人脸特定位置进行修饰美颜；同时获取表情、情绪等人脸属性信息，实现特效相机、动态贴纸等互动娱乐功能

+ 人脸检测API免费配额
![人脸检测API免费配额]()

+ 人脸检测API收费标准
![人脸检测API收费标准]()

[百度API——人脸检测的详细价格](https://ai.baidu.com/docs#/BodyAnalysis-Pricing/top)

+ 请求示例：
 + HTTP方法：POST
 + 请求URL： https://aip.baidubce.com/rest/2.0/face/v3/detect


+ 请求代码示例

```
# encoding:utf-8

import requests

'''
人脸检测与属性分析
'''

request_url = "https://aip.baidubce.com/rest/2.0/face/v3/detect"

params = "{\"image\":\"027d8308a2ec665acb1bdf63e513bcb9\",\"image_type\":\"FACE_TOKEN\",\"face_field\":\"faceshape,facetype\"}"
access_token = '[调用鉴权接口获取的token]'
request_url = request_url + "?access_token=" + access_token
headers = {'content-type': 'application/json'}
response = requests.post(request_url, data=params, headers=headers)
if response:
    print (response.json())

```

+ 返回结果

![返回结果]()
![返回结果]()
![返回结果]()
![返回结果]()

+ 返回示例
```
 {	
  "face_num": 1,
  "face_list": [
        {
            "face_token": "35235asfas21421fakghktyfdgh68bio",
            "location": { 
                "left": 117,
                "top": 131,
                "width": 172,
                "height": 170,
                "rotation": 4
            },
            "face_probability": 1,
            "angle" :{
                 "yaw" : -0.34859421849251
                 "pitch" 1.9135693311691  
                 "roll" :2.3033397197723  
            }
            "landmark": [  
                {
                    "x": 161.74819946289,
                    "y": 163.30244445801
                },
                ...
            ],
            "landmark72": [ 
                {
                    "x": 115.86531066895,
                    "y": 170.0546875
                }，
                ...
            ],
            "age": 29.298097610474,
            "beauty": 55.128883361816,
            "expression": {
                "type": "smile",
                "probability" : 0.5543018579483
            },
            "gender": {
                "type": "male",
                "probability": 0.99979132413864
            },
            "glasses": {
    			"type": "sun",
                "probability": 0.99999964237213
            },
            "race": {
                "type": "yellow",
                "probability": 0.99999976158142
            },
            "face_shape": {
                "type": "triangle",
                "probability": 0.5543018579483
            }
            "quality": {
                "occlusion": {
                    "left_eye": 0,
                    "right_eye": 0,
                    "nose": 0,
                    "mouth": 0,
                    "left_cheek": 0.0064102564938366,
                    "right_cheek": 0.0057411273010075,
                    "chin": 0
                },
                "blur": 1.1886881756684e-10,
                "illumination": 141,
                "completeness": 1
            }
        }
    ]
}

``` 
2. 百度API——人像分割
+ API价值主张
①将原始图片中的人像分离出来，选择新的背景图像进行替换、合成
②人像分割算法业界领先
③支持返回分割后的二值图、灰度图、人像前景图，并可通过参数设置，自主设置返回哪些结果图，避免造成带宽浪费
④对于输入的一张图片（可正常解码，且长宽比适宜），识别人体的轮廓范围，与背景进行分离，适用于拍照背景替换、照片合成、身体特效等场景。输入正常人像图片，返回分割后的二值结果图、灰度图、透明背景的人像图（png格式）。

+ 人像分割API免费配额
![人像分割API免费配额](https://raw.githubusercontent.com/DLIERBA/API_ML_AI/master/images/%E7%99%BE%E5%BA%A6API%E4%BA%BA%E5%83%8F%E5%88%86%E5%89%B2.png)

+ 人像分割API收费标准
![人像分割API收费标准]()

+ 请求示例：
 + HTTP 方法：POST
 + 请求URL： https://aip.baidubce.com/rest/2.0/image-classify/v1/body_seg

+ 请求代码示例
``` 
# encoding:utf-8

import requests
import base64

'''
人像分割
'''

request_url = "https://aip.baidubce.com/rest/2.0/image-classify/v1/body_seg"
# 二进制方式打开图片文件
f = open('[本地文件]', 'rb')
img = base64.b64encode(f.read())

params = {"image":img}
access_token = '[调用鉴权接口获取的token]'
request_url = request_url + "?access_token=" + access_token
headers = {'content-type': 'application/x-www-form-urlencoded'}
response = requests.post(request_url, data=params, headers=headers)
if response:
    print (response.json())
``` 
+ 返回示例
```
{
	"log_id": 716033439,
	"labelmap": "xxxx",
	"scoremap": "xxxx",
	"foreground": "xxxx"
}

```


3. 百度API——手势识别
+ API价值定位：
①检测图像中的所有手部，识别手势类型，不限手势数量；支持自拍、他人拍摄、各种角度等多样化场景
②识别24种常见手势，支持单手手势和双手手势，包括拳头、OK、比心、作揖、作别、祈祷、我爱你、点赞、Diss、Rock、竖中指、数字等
③丰富的手势；领先的算法；稳定的保障

+ 手势识别API的免费配额
![手势识别API免费配额]()

+ 手势识别API的收费标准
![手势识别API收费标准]()


+ 请求示例：
 + HTTP 方法：POST
 + 请求URL： https://aip.baidubce.com/rest/2.0/image-classify/v1/gesture

+ 请求代码示例
``` 
# encoding:utf-8

import requests
import base64

'''
手势识别
'''

request_url = "https://aip.baidubce.com/rest/2.0/image-classify/v1/gesture"
# 二进制方式打开图片文件
f = open('[本地文件]', 'rb')
img = base64.b64encode(f.read())

params = {"image":img}
access_token = '[调用鉴权接口获取的token]'
request_url = request_url + "?access_token=" + access_token
headers = {'content-type': 'application/x-www-form-urlencoded'}
response = requests.post(request_url, data=params, headers=headers)
if response:
    print (response.json())

``` 
+ 返回示例
```
    {
        "log_id": 4466502370458351471,
    	"result_num": 2,
    	"result": [{
    		"probability": 0.9844077229499817,
    		"top": 20,
    		"height": 156,
    		"classname": "Face",
    		"width": 116,
    		"left": 173
    	},
    	{
    		"probability": 0.4679304957389832,
    		"top": 157,
    		"height": 106,
    		"classname": "Heart_2",
    		"width": 177,
    		"left": 183
    	}]
    }

```







#### 十二.AI产品概率性 
+ 百度手势识别：手势识别算法业界领先，识别准确率90%以上
+ 百度人像分割：人像分割算法业界领先，评测IoU 90%以上


#### 十三.API功能对比
1. 人脸识别API
+ 国际人脸识别评估集LFW榜， face++ 99.5% 商汤 99.53% 腾讯 99.65% 百度 99.77%，非思丸 99.77% 中科云从 99.5% 道奇智能99.64%，FaceTo 99.4% 宇泛智能 99%这些都是基于国内的
+ 百度人脸识别API，功能强大，简单易用；至少有很多人工智能的大师是在百度工作过，也是国内最早进军人工的企业之一，虽然后来大师都从百度出走，但是人家积累的根基还是很厚的。
+ face++号称是一个提供免费人脸检测、人脸识别、人脸属性分析等服务的云端服务平台，但是它所谓的免费其实就是注册和试用。但价格上应该还是可以接受的
+ 非思丸这家公司提供免费SDK，免费API，免费APK，而且不需要提供太多资料
+ 虹软技术号称提供免费的sdk，到底是怎么收费不清楚，当时对于这种不是很知名，试用就要提供一大堆个人信息还是不要用为妙。

[参考文章](https://zhuanlan.zhihu.com/p/92732557)



#### 十四.API使用风险评估
在云环境下，API提供了对应功能的访问权限，这增加了云平台的攻击面，攻击者可能存在滥用或找流行API代码中的漏洞，实现攻击云用户与云服务，因此，云安全联盟也表示不安全的API是云计算面临的最大威胁之一

+ 应对措施
1. 通过API网关进行监视
2. 安全思维贯彻开发过程始终
3. 应用行业安全最佳实践和标准

+ 参考文章：
[API安全风险](https://www.fisec.cn/854.html)
[API成为企业黑客攻击目标，你的API还安全吗？](https://baijiahao.baidu.com/s?id=1607045952862598854&wfr=spider&for=pc)

#### 产品的可行性
1. 该产品是一个APP
+ App可以实现完整功能，灵活性强
+ APP能够在交互、视觉等用户体验上满足用户的高要求
+ App的界面内容更丰富，运转速度快，系统更加流畅

2. 该产品需求明确，而且需求针对的特定的群体普遍偏年轻，其优势就是年轻群体对新鲜事物的接受度较高且具有较强的传播能力

3. 该产品有核心功能和辅助功能，功能多样而且新颖

4. 该产品能有效解决用户日常生活中较为常见的尴尬情况，

#### 交互需求 
1. 当涉及到下载或其他很耗费流量的操作时，会进行2G/3G网络还是wifi网络的判断，当判断出是非wifi时，会进行提醒。其他需要向后台请求数据时，只进行简单的网络状况是否良好的判断，当网络状况不良时进行提示。
2. 当用户上传的图片不符合要求时，会提醒用户重新上传

#### 异常流
1. 如果识别图像不成功，给出具体字段的错误提示信息，让用户重新调整好光亮度和角度重新拍摄；
2. 如果拍照识别的图像不正确，提示用户可以手动选择和更改。

#### 非功能性需求
+ 性能：估计用户数为1万人，每天登录用户数为3000左右，网络的带宽为100M带宽。在非高峰时间根据编号和名称特定条件进行搜索，可以在3秒内得到搜索结果。当通过互联网接入系统的时候，期望在编号和名称搜索时最长查询时间<15秒。
+ 可靠性：要求系统7x24小时运行，全年持续运行故障停运时间累计不能超过10小时。
+ 可维护性：故障的可排查能力，系统的修正，升级，备份，恢复机制。
+ 安全：当用户的账号在常用设备以外的设备登录了，要及时发消息通知用户；当用户出现登录异常的情况时，要开启动态口令验证（例如短信发生动态码）等。
+ 易用性： 功能操作简单，界面清晰简洁，某些较复杂的操作需要给用户提供操作指引。
+ 数据一致性：当发生用户个人资料变更时，保证其他地方的信息要被同步修改。
#### 结果预期
+ 上线初期，先在一个小区域内（例如某个地区的高校）进行推广，然后收集这一部分使用者的体验评价，根据情况进行完善
+ 当APP功能基本完善，用户评价普遍向好时，面向整个市场推出使用，不过刚开始需要使用一些奖励措施，吸引更多的用户使用APP
+ 到APP被广泛应用，拥有较为稳定的用户群体时，可减少甚至取消先前为了吸引新用户所采取的奖励，并且可以考虑增加其他功能，利用持续创新的手段吸引新用户以及留住旧用户
+ 发展到一定阶段后，APP可能会接手广告业务获利；或者在APP内开设购物功能，贩卖毕业用品之类的；也有可能选择增设会员服务，以吸引用户在APP内消费，最终实现APP盈利
#### 附录
[毕业纪念APP原型完整版](http://nfunm080.gitee.io/graduation-memorial)
